{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  margin-top: 24px;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  font-size: 14px;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  margin-bottom: 0px;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  margin-bottom: 0px;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  margin-bottom: 16px;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  background-image: url('/images/farm-space/astro.png');\\n  background-size: 256px;\\n  background-repeat: no-repeat;\\n  background-position: bottom right;\\n  min-height: 100%;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useCallback}from'react';import styled from'styled-components';import{Heading,Card,CardBody,Button,LinkExternal,Flex}from'@pancakeswap-libs/uikit';import{useWallet}from'@binance-chain/bsc-use-wallet';import useI18n from'hooks/useI18n';import{useAllHarvest}from'hooks/useHarvest';import useFarmsWithBalance from'hooks/useFarmsWithBalance';import{getCakeAddress}from'../../../utils/addressHelpers';var StyledFarmStakingCard=styled(Card)(_templateObject());var Block=styled.div(_templateObject2());var TokenImageWrapper=styled.div(_templateObject3());var CardImage=styled.img(_templateObject4());var Label=styled.div(_templateObject5(),function(_ref){var theme=_ref.theme;return theme.colors.textSubtle;});var Actions=styled.div(_templateObject6());var token=getCakeAddress();var FarmedStakingCard=function FarmedStakingCard(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),pendingTx=_useState2[0],setPendingTx=_useState2[1];var _useWallet=useWallet(),account=_useWallet.account;var TranslateString=useI18n();var FarmsWithBalance=useFarmsWithBalance();var balancesWithValue=FarmsWithBalance.filter(function(balanceType){return balanceType.balance.toNumber()>0;});var _useAllHarvest=useAllHarvest(balancesWithValue.map(function(farmWithBalance){return farmWithBalance.pid;})),onReward=_useAllHarvest.onReward;var harvestAllFarms=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setPendingTx(true);_context.prev=1;_context.next=4;return onReward();case 4:_context.next=8;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);case 8:_context.prev=8;setPendingTx(false);return _context.finish(8);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,6,8,11]]);})),[onReward]);var addWatchJaguarToken=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var provider,wasAdded;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nprovider=window.ethereum;if(!provider){_context2.next=11;break;}_context2.prev=2;_context2.next=5;return provider.request({method:'wallet_watchAsset',params:{type:'ERC20',options:{address:token,symbol:'SALSA',decimals:'18',image:'/logo.png'}}});case 5:wasAdded=_context2.sent;if(wasAdded){console.log('Token was added');}_context2.next=11;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);})),[]);return/*#__PURE__*/_jsx(StyledFarmStakingCard,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Heading,{size:\"xl\",mb:\"24px\",children:\"Add SALSA\"}),/*#__PURE__*/_jsx(Flex,{flexDirection:\"column\",mb:\"15px\",children:/*#__PURE__*/_jsx(LinkExternal,{mb:\"20px\",small:true,href:\"https://explorer-mainnet.maticvigil.com/tokens/\".concat(token),children:token})}),/*#__PURE__*/_jsxs(TokenImageWrapper,{children:[/*#__PURE__*/_jsx(CardImage,{src:\"/images/egg/9.png\",alt:\"Farm SALSA logo\",width:60,height:60}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Button,{onClick:addWatchJaguarToken,size:\"sm\",children:[\"+ Add SALSA to \",/*#__PURE__*/_jsx(\"img\",{style:{marginLeft:8},width:16,src:\"https://jaguarswap.com/images/tokens/metamask.png\",alt:\"metamask logo\"})]})]})]})});};export default FarmedStakingCard;","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/src/views/Home/components/Metamask.tsx"],"names":["React","useState","useCallback","styled","Heading","Card","CardBody","Button","LinkExternal","Flex","useWallet","useI18n","useAllHarvest","useFarmsWithBalance","getCakeAddress","StyledFarmStakingCard","Block","div","TokenImageWrapper","CardImage","img","Label","theme","colors","textSubtle","Actions","token","FarmedStakingCard","pendingTx","setPendingTx","account","TranslateString","FarmsWithBalance","balancesWithValue","filter","balanceType","balance","toNumber","map","farmWithBalance","pid","onReward","harvestAllFarms","addWatchJaguarToken","provider","window","ethereum","request","method","params","type","options","address","symbol","decimals","image","wasAdded","console","log","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react'\nimport styled from 'styled-components'\nimport { Heading, Card, CardBody, Button, LinkExternal, Flex } from '@pancakeswap-libs/uikit'\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\nimport BigNumber from 'bignumber.js'\nimport useI18n from 'hooks/useI18n'\nimport { useAllHarvest } from 'hooks/useHarvest'\nimport useFarmsWithBalance from 'hooks/useFarmsWithBalance'\nimport UnlockButton from 'components/UnlockButton'\nimport CakeHarvestBalance from './CakeHarvestBalance'\nimport CakeWalletBalance from './CakeWalletBalance'\nimport { usePriceCakeBusd } from '../../../state/hooks'\nimport useTokenBalance from '../../../hooks/useTokenBalance'\nimport { getCakeAddress } from '../../../utils/addressHelpers'\nimport useAllEarnings from '../../../hooks/useAllEarnings'\nimport { getBalanceNumber } from '../../../utils/formatBalance'\n\nconst StyledFarmStakingCard = styled(Card)`\n  background-image: url('/images/farm-space/astro.png');\n  background-size: 256px;\n  background-repeat: no-repeat;\n  background-position: bottom right;\n  min-height: 100%;\n`\n\nconst Block = styled.div`\n  margin-bottom: 16px;\n`\n\nconst TokenImageWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 0px;\n`\n\nconst CardImage = styled.img`\n  margin-bottom: 0px;\n`\n\nconst Label = styled.div`\n  color: ${({ theme }) => theme.colors.textSubtle};\n  font-size: 14px;\n`\n\nconst Actions = styled.div`\n  margin-top: 24px;\n`\n\nconst token = getCakeAddress();\n\nconst FarmedStakingCard = () => {\n  const [pendingTx, setPendingTx] = useState(false)\n  const { account } = useWallet()\n  const TranslateString = useI18n()\n  const FarmsWithBalance = useFarmsWithBalance()\n  const balancesWithValue = FarmsWithBalance.filter((balanceType) => balanceType.balance.toNumber() > 0)\n\n  const { onReward } = useAllHarvest(balancesWithValue.map((farmWithBalance) => farmWithBalance.pid))\n\n  const harvestAllFarms = useCallback(async () => {\n    setPendingTx(true)\n    try {\n      await onReward()\n    } catch (error) {\n      // TODO: find a way to handle when the user rejects transaction or it fails\n    } finally {\n      setPendingTx(false)\n    }\n  }, [onReward])\n\n  const addWatchJaguarToken = useCallback(async () => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    const provider = window.ethereum\n    if (provider) {\n      try {\n        // wasAdded is a boolean. Like any RPC method, an error may be thrown.\n        const wasAdded = await provider.request({\n          method: 'wallet_watchAsset',\n          params: {\n            type: 'ERC20',\n            options: {\n              address: token,\n              symbol: 'SALSA',\n              decimals: '18',\n              image: '/logo.png',\n            },\n          },\n        })\n\n        if (wasAdded) {\n          console.log('Token was added')\n        }\n      } catch (error) {\n        // TODO: find a way to handle when the user rejects transaction or it fails\n      }\n    }\n  }, [])\n\n  return (\n    <StyledFarmStakingCard>\n      <CardBody>\n        <Heading size=\"xl\" mb=\"24px\">\n          Add SALSA\n        </Heading>\n        <Flex flexDirection=\"column\" mb=\"15px\">\n          <LinkExternal mb=\"20px\" small href={`https://explorer-mainnet.maticvigil.com/tokens/${token}`}>\n            {token}\n          </LinkExternal>\n        </Flex>\n        <TokenImageWrapper>\n          <CardImage src=\"/images/egg/9.png\" alt=\"Farm SALSA logo\" width={60} height={60} />\n          <hr/>\n          <Button onClick={addWatchJaguarToken} size=\"sm\">\n            + Add SALSA to <img style={{ marginLeft: 8 }} width={16} src=\"https://jaguarswap.com/images/tokens/metamask.png\" alt=\"metamask logo\" />\n          </Button>\n        </TokenImageWrapper>\n      </CardBody>\n    </StyledFarmStakingCard>\n  )\n}\n\nexport default FarmedStakingCard"]},"metadata":{},"sourceType":"module"}