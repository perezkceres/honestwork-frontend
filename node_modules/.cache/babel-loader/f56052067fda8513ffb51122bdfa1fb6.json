{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/src/views/Home/components/EarnAPRCard.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo } from 'react';\nimport styled from 'styled-components';\nimport { Heading, Card, CardBody, Flex, ArrowForwardIcon, Skeleton } from '@pancakeswap-libs/uikit';\nimport max from 'lodash/max';\nimport { NavLink } from 'react-router-dom';\nimport BigNumber from 'bignumber.js';\nimport { QuoteToken } from 'config/constants/types';\nimport { useFarms, usePriceBnbBusd, usePriceCakeBusd, usePriceWethBusd } from 'state/hooks';\nconst StyledFarmStakingCard = styled(Card)`\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n\n  ${({\n  theme\n}) => theme.mediaQueries.lg} {\n    margin: 0;\n    max-width: none;\n  }\n\n  transition: opacity 200ms;\n  &:hover {\n    opacity: 0.65;\n  }\n`;\n_c = StyledFarmStakingCard;\nconst CardMidContent = styled(Heading).attrs({\n  size: 'xl'\n})`\n  line-height: 44px;\n`;\n_c2 = CardMidContent;\n\nconst EarnAPRCard = () => {\n  _s();\n\n  const farms = useFarms();\n  const cakePrice = usePriceCakeBusd();\n  const bnbPrice = usePriceBnbBusd();\n  const wethPrice = usePriceWethBusd();\n  const highestApr = useMemo(() => {\n    const aprs = farms // Filter inactive farms, because their theoretical APR is super high. In practice, it's 0.\n    .filter(farm => farm.multiplier !== '0X').map(farm => {\n      if (farm.lpTotalInQuoteToken) {\n        const BLOCKS_PER_YEAR = new BigNumber(10512000);\n        const cakeRewardPerBlock = new BigNumber(farm.gajPerBlock || 1).times(new BigNumber(farm.poolWeight)).div(new BigNumber(10).pow(18));\n        const cakeRewardPerYear = cakeRewardPerBlock.times(BLOCKS_PER_YEAR);\n        let apy = cakePrice.times(cakeRewardPerYear);\n        let totalValue = new BigNumber(farm.lpTotalInQuoteToken || 0);\n\n        if (farm.quoteTokenSymbol === QuoteToken.BNB) {\n          totalValue = totalValue.times(bnbPrice);\n        } else if (farm.quoteTokenSymbol === QuoteToken.WETH) {\n          totalValue = totalValue.times(wethPrice);\n        }\n\n        if (totalValue.comparedTo(0) > 0) {\n          apy = apy.div(totalValue);\n        }\n\n        return {\n          apy\n        };\n      }\n\n      return null;\n    });\n    const maxApr = max(aprs);\n    return maxApr;\n  }, [cakePrice, bnbPrice, wethPrice, farms]);\n  return /*#__PURE__*/_jsxDEV(StyledFarmStakingCard, {\n    children: /*#__PURE__*/_jsxDEV(NavLink, {\n      exact: true,\n      activeClassName: \"active\",\n      to: \"/farms\",\n      id: \"farm-apr-cta\",\n      children: /*#__PURE__*/_jsxDEV(CardBody, {\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          color: \"contrast\",\n          size: \"lg\",\n          children: \"Earn up to\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardMidContent, {\n          color: \"secondary\",\n          children: highestApr ? `${Number(highestApr.apy.toNumber() * 100).toFixed(2)}% ${'APR'}` : /*#__PURE__*/_jsxDEV(Skeleton, {\n            animation: \"pulse\",\n            variant: \"rect\",\n            height: \"44px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 107\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          justifyContent: \"space-between\",\n          children: [/*#__PURE__*/_jsxDEV(Heading, {\n            color: \"contrast\",\n            size: \"lg\",\n            children: \"in Farms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ArrowForwardIcon, {\n            mt: 30,\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EarnAPRCard, \"oxAp+a91kz6rBsx7q4LMs7Uj+g0=\", false, function () {\n  return [useFarms, usePriceCakeBusd, usePriceBnbBusd, usePriceWethBusd];\n});\n\n_c3 = EarnAPRCard;\nexport default EarnAPRCard;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"StyledFarmStakingCard\");\n$RefreshReg$(_c2, \"CardMidContent\");\n$RefreshReg$(_c3, \"EarnAPRCard\");","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/src/views/Home/components/EarnAPRCard.tsx"],"names":["React","useMemo","styled","Heading","Card","CardBody","Flex","ArrowForwardIcon","Skeleton","max","NavLink","BigNumber","QuoteToken","useFarms","usePriceBnbBusd","usePriceCakeBusd","usePriceWethBusd","StyledFarmStakingCard","theme","mediaQueries","lg","CardMidContent","attrs","size","EarnAPRCard","farms","cakePrice","bnbPrice","wethPrice","highestApr","aprs","filter","farm","multiplier","map","lpTotalInQuoteToken","BLOCKS_PER_YEAR","cakeRewardPerBlock","gajPerBlock","times","poolWeight","div","pow","cakeRewardPerYear","apy","totalValue","quoteTokenSymbol","BNB","WETH","comparedTo","maxApr","Number","toNumber","toFixed"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Heading, Card, CardBody, Flex, ArrowForwardIcon, Skeleton } from '@pancakeswap-libs/uikit'\r\nimport max from 'lodash/max'\r\nimport { NavLink } from 'react-router-dom'\r\nimport BigNumber from 'bignumber.js'\r\nimport { QuoteToken } from 'config/constants/types'\r\nimport { useFarms, usePriceBnbBusd, usePriceCakeBusd, usePriceWethBusd } from 'state/hooks'\r\n\r\nconst StyledFarmStakingCard = styled(Card)`\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    margin: 0;\r\n    max-width: none;\r\n  }\r\n\r\n  transition: opacity 200ms;\r\n  &:hover {\r\n    opacity: 0.65;\r\n  }\r\n`\r\nconst CardMidContent = styled(Heading).attrs({ size: 'xl' })`\r\n  line-height: 44px;\r\n`\r\nconst EarnAPRCard = () => {\r\n    const farms = useFarms()\r\n    const cakePrice = usePriceCakeBusd()\r\n    const bnbPrice = usePriceBnbBusd()\r\n    const wethPrice = usePriceWethBusd()\r\n\r\n    const highestApr = useMemo(() => {\r\n        const aprs = farms\r\n            // Filter inactive farms, because their theoretical APR is super high. In practice, it's 0.\r\n            .filter((farm) => farm.multiplier !== '0X')\r\n            .map((farm) => {\r\n                if (farm.lpTotalInQuoteToken) {\r\n                    const BLOCKS_PER_YEAR = new BigNumber(10512000)\r\n                    const cakeRewardPerBlock = new BigNumber(farm.gajPerBlock || 1).times(new BigNumber(farm.poolWeight)).div(new BigNumber(10).pow(18))\r\n                    const cakeRewardPerYear = cakeRewardPerBlock.times(BLOCKS_PER_YEAR)\r\n\r\n                    let apy = cakePrice.times(cakeRewardPerYear);\r\n                    let totalValue = new BigNumber(farm.lpTotalInQuoteToken || 0);\r\n\r\n                    if (farm.quoteTokenSymbol === QuoteToken.BNB) {\r\n                        totalValue = totalValue.times(bnbPrice);\r\n                    } else if (farm.quoteTokenSymbol === QuoteToken.WETH) {\r\n                        totalValue = totalValue.times(wethPrice);\r\n                    }\r\n\r\n                    if (totalValue.comparedTo(0) > 0) {\r\n                        apy = apy.div(totalValue);\r\n                    }\r\n                    return { apy }\r\n                }\r\n                return null\r\n            })\r\n        const maxApr = max(aprs)\r\n        return maxApr\r\n    }, [cakePrice, bnbPrice, wethPrice, farms])\r\n\r\n    return (\r\n        <StyledFarmStakingCard>\r\n            <NavLink exact activeClassName=\"active\" to=\"/farms\" id=\"farm-apr-cta\">\r\n                <CardBody>\r\n                    <Heading color=\"contrast\" size=\"lg\">\r\n                        Earn up to\r\n                    </Heading>\r\n                    <CardMidContent color=\"secondary\">\r\n                        {highestApr ? `${Number(highestApr.apy.toNumber() * 100).toFixed(2)}% ${'APR'}` : <Skeleton animation=\"pulse\" variant=\"rect\" height=\"44px\" />}\r\n                    </CardMidContent>\r\n                    <Flex justifyContent=\"space-between\">\r\n                        <Heading color=\"contrast\" size=\"lg\">\r\n                            in Farms\r\n                        </Heading>\r\n                        <ArrowForwardIcon mt={30} color=\"primary\" />\r\n                    </Flex>\r\n                </CardBody>\r\n            </NavLink>\r\n        </StyledFarmStakingCard>\r\n    )\r\n}\r\n\r\nexport default EarnAPRCard\r\n"]},"metadata":{},"sourceType":"module"}