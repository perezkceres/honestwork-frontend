{"ast":null,"code":"import BigNumber from'bignumber.js';import{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import useRefresh from'hooks/useRefresh';import{fetchFarmsPublicDataAsync,fetchPoolsUserDataAsync}from'./actions';import{QuoteToken}from'../config/constants/types';var ZERO=new BigNumber(0);export var useFetchPublicData=function useFetchPublicData(){var dispatch=useDispatch();var _useRefresh=useRefresh(),slowRefresh=_useRefresh.slowRefresh;useEffect(function(){dispatch(fetchFarmsPublicDataAsync());// dispatch(fetchPoolsPublicDataAsync())\n},[dispatch,slowRefresh]);};// Farms\nexport var useFarms=function useFarms(){var farms=useSelector(function(state){return state.farms.data;});return farms;};export var useFarmFromPid=function useFarmFromPid(pid){var farm=useSelector(function(state){return state.farms.data.find(function(f){return f.pid===pid;});});return farm;};export var useFarmFromSymbol=function useFarmFromSymbol(lpSymbol){var farm=useSelector(function(state){return state.farms.data.find(function(f){return f.lpSymbol===lpSymbol;});});return farm;};export var useFarmUser=function useFarmUser(pid){var farm=useFarmFromPid(pid);return{allowance:farm.userData?new BigNumber(farm.userData.allowance):new BigNumber(0),tokenBalance:farm.userData?new BigNumber(farm.userData.tokenBalance):new BigNumber(0),stakedBalance:farm.userData?new BigNumber(farm.userData.stakedBalance):new BigNumber(0),earnings:farm.userData?new BigNumber(farm.userData.earnings):new BigNumber(0)};};// Pools\nexport var usePools=function usePools(account){var _useRefresh2=useRefresh(),fastRefresh=_useRefresh2.fastRefresh;var dispatch=useDispatch();useEffect(function(){if(account){dispatch(fetchPoolsUserDataAsync(account));}},[account,dispatch,fastRefresh]);var pools=useSelector(function(state){return state.pools.data;});return pools;};export var usePoolFromPid=function usePoolFromPid(sousId){var pool=useSelector(function(state){return state.pools.data.find(function(p){return p.sousId===sousId;});});return pool;};// Prices\nexport var usePriceBnbBusd=function usePriceBnbBusd(){var pid=1;// matic-usdc LP\nvar farm=useFarmFromPid(pid);return farm.tokenPriceVsQuote?new BigNumber(farm.tokenPriceVsQuote):ZERO;};export var usePriceCakeBnb=function usePriceCakeBnb(){var pid=3;// SALSA-Matic LP\nvar farm=useFarmFromPid(pid);return farm.tokenPriceVsQuote?new BigNumber(farm.tokenPriceVsQuote):ZERO;};export var usePriceCakeBusd=function usePriceCakeBusd(){// const pid = 1 // CAKE-BNB LP\n// const bnbPriceUSD = usePriceBnbBusd()\n// const farm = useFarmFromPid(pid)\n// return farm.tokenPriceVsQuote ? bnbPriceUSD.times(farm.tokenPriceVsQuote) : ZERO\nvar pid=0;// SALSA-USDC LP\nvar farm=useFarmFromPid(pid);return farm.tokenPriceVsQuote?new BigNumber(farm.tokenPriceVsQuote):ZERO;};export var usePriceWethBusd=function usePriceWethBusd(){// const pid = 1 // CAKE-BNB LP\n// const bnbPriceUSD = usePriceBnbBusd()\n// const farm = useFarmFromPid(pid)\n// return farm.tokenPriceVsQuote ? bnbPriceUSD.times(farm.tokenPriceVsQuote) : ZERO\nvar pid=3;// WETH-BUSD LP\nvar farm=useFarmFromPid(pid);return farm.tokenPriceVsQuote?new BigNumber(farm.tokenPriceVsQuote):ZERO;};export var useTotalValue=function useTotalValue(){var farms=useFarms();var bnbPrice=usePriceBnbBusd();var cakePrice=usePriceCakeBusd();var wethPrice=usePriceWethBusd();var value=new BigNumber(0);for(var i=0;i<farms.length;i++){var farm=farms[i];if(farm.lpTotalInQuoteToken){var val=void 0;if(farm.quoteTokenSymbol===QuoteToken.BNB){val=bnbPrice.times(farm.lpTotalInQuoteToken);}else if(farm.quoteTokenSymbol===QuoteToken.CAKE){val=cakePrice.times(farm.lpTotalInQuoteToken);}// else if (farm.quoteTokenSymbol === QuoteToken.BUSD) {\n//  val = (cakePrice.times(farm.lpTotalInQuoteToken));\n// }\nelse{val=farm.lpTotalInQuoteToken;}value=value.plus(val);}}return value;};","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/src/state/hooks.ts"],"names":["BigNumber","useEffect","useSelector","useDispatch","useRefresh","fetchFarmsPublicDataAsync","fetchPoolsUserDataAsync","QuoteToken","ZERO","useFetchPublicData","dispatch","slowRefresh","useFarms","farms","state","data","useFarmFromPid","pid","farm","find","f","useFarmFromSymbol","lpSymbol","useFarmUser","allowance","userData","tokenBalance","stakedBalance","earnings","usePools","account","fastRefresh","pools","usePoolFromPid","sousId","pool","p","usePriceBnbBusd","tokenPriceVsQuote","usePriceCakeBnb","usePriceCakeBusd","usePriceWethBusd","useTotalValue","bnbPrice","cakePrice","wethPrice","value","i","length","lpTotalInQuoteToken","val","quoteTokenSymbol","BNB","times","CAKE","plus"],"mappings":"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","sourcesContent":["import BigNumber from 'bignumber.js'\r\nimport { useEffect, useMemo } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport useRefresh from 'hooks/useRefresh'\r\nimport { fetchFarmsPublicDataAsync, fetchPoolsPublicDataAsync, fetchPoolsUserDataAsync } from './actions'\r\nimport { State, Farm, Pool } from './types'\r\nimport { QuoteToken } from '../config/constants/types'\r\n\r\nconst ZERO = new BigNumber(0)\r\n\r\nexport const useFetchPublicData = () => {\r\n  const dispatch = useDispatch()\r\n  const { slowRefresh } = useRefresh()\r\n  useEffect(() => {\r\n    dispatch(fetchFarmsPublicDataAsync())\r\n    // dispatch(fetchPoolsPublicDataAsync())\r\n  }, [dispatch, slowRefresh])\r\n}\r\n\r\n// Farms\r\n\r\nexport const useFarms = (): Farm[] => {\r\n  const farms = useSelector((state: State) => state.farms.data)\r\n  return farms\r\n}\r\n\r\nexport const useFarmFromPid = (pid): Farm => {\r\n  const farm = useSelector((state: State) => state.farms.data.find((f) => f.pid === pid))\r\n  return farm\r\n}\r\n\r\nexport const useFarmFromSymbol = (lpSymbol: string): Farm => {\r\n  const farm = useSelector((state: State) => state.farms.data.find((f) => f.lpSymbol === lpSymbol))\r\n  return farm\r\n}\r\n\r\nexport const useFarmUser = (pid) => {\r\n  const farm = useFarmFromPid(pid)\r\n\r\n  return {\r\n    allowance: farm.userData ? new BigNumber(farm.userData.allowance) : new BigNumber(0),\r\n    tokenBalance: farm.userData ? new BigNumber(farm.userData.tokenBalance) : new BigNumber(0),\r\n    stakedBalance: farm.userData ? new BigNumber(farm.userData.stakedBalance) : new BigNumber(0),\r\n    earnings: farm.userData ? new BigNumber(farm.userData.earnings) : new BigNumber(0),\r\n  }\r\n}\r\n\r\n\r\n// Pools\r\n\r\nexport const usePools = (account): Pool[] => {\r\n  const { fastRefresh } = useRefresh()\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    if (account) {\r\n      dispatch(fetchPoolsUserDataAsync(account))\r\n    }\r\n  }, [account, dispatch, fastRefresh])\r\n\r\n  const pools = useSelector((state: State) => state.pools.data)\r\n  return pools\r\n}\r\n\r\nexport const usePoolFromPid = (sousId): Pool => {\r\n  const pool = useSelector((state: State) => state.pools.data.find((p) => p.sousId === sousId))\r\n  return pool\r\n}\r\n\r\n// Prices\r\n\r\nexport const usePriceBnbBusd = (): BigNumber => {\r\n  const pid = 1 // matic-usdc LP\r\n  const farm = useFarmFromPid(pid)\r\n  return farm.tokenPriceVsQuote ? new BigNumber(farm.tokenPriceVsQuote) : ZERO\r\n}\r\n\r\nexport const usePriceCakeBnb = (): BigNumber => {\r\n  const pid = 3 // SALSA-Matic LP\r\n  const farm = useFarmFromPid(pid)\r\n  return farm.tokenPriceVsQuote ? new BigNumber(farm.tokenPriceVsQuote) : ZERO\r\n}\r\n\r\nexport const usePriceCakeBusd = (): BigNumber => {\r\n  // const pid = 1 // CAKE-BNB LP\r\n  // const bnbPriceUSD = usePriceBnbBusd()\r\n  // const farm = useFarmFromPid(pid)\r\n  // return farm.tokenPriceVsQuote ? bnbPriceUSD.times(farm.tokenPriceVsQuote) : ZERO\r\n  const pid = 0; // SALSA-USDC LP\r\n  const farm = useFarmFromPid(pid);\r\n  return farm.tokenPriceVsQuote ? new BigNumber(farm.tokenPriceVsQuote) : ZERO;\r\n}\r\n\r\nexport const usePriceWethBusd = (): BigNumber => {\r\n  // const pid = 1 // CAKE-BNB LP\r\n  // const bnbPriceUSD = usePriceBnbBusd()\r\n  // const farm = useFarmFromPid(pid)\r\n  // return farm.tokenPriceVsQuote ? bnbPriceUSD.times(farm.tokenPriceVsQuote) : ZERO\r\n  const pid = 3; // WETH-BUSD LP\r\n  const farm = useFarmFromPid(pid);\r\n  return farm.tokenPriceVsQuote ? new BigNumber(farm.tokenPriceVsQuote) : ZERO;\r\n}\r\n\r\nexport const useTotalValue = (): BigNumber => {\r\n  const farms = useFarms();\r\n  const bnbPrice = usePriceBnbBusd();\r\n  const cakePrice = usePriceCakeBusd();\r\n  const wethPrice = usePriceWethBusd();\r\n  let value = new BigNumber(0);\r\n  for (let i = 0; i < farms.length; i++) {\r\n    const farm = farms[i]\r\n    if (farm.lpTotalInQuoteToken) {\r\n      let val;\r\n      if (farm.quoteTokenSymbol === QuoteToken.BNB) {\r\n        val = (bnbPrice.times(farm.lpTotalInQuoteToken));\r\n      }else if (farm.quoteTokenSymbol === QuoteToken.CAKE) {\r\n        val = (cakePrice.times(farm.lpTotalInQuoteToken));\r\n      }\r\n      // else if (farm.quoteTokenSymbol === QuoteToken.BUSD) {\r\n      //  val = (cakePrice.times(farm.lpTotalInQuoteToken));\r\n      // }\r\n      else{\r\n        val = (farm.lpTotalInQuoteToken);\r\n      }\r\n      value = value.plus(val);\r\n\r\n    }\r\n  }\r\n  return value;\r\n}"]},"metadata":{},"sourceType":"module"}