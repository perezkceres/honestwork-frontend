{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{StringTranslations}from'@crowdin/crowdin-api-client';import{TranslationsContext}from'contexts/Localisation/translationsContext';import{allLanguages,EN}from'config/localisation/languageCodes';var CACHE_KEY='pancakeSwapLanguage';var LanguageContext=/*#__PURE__*/React.createContext({selectedLanguage:EN,setSelectedLanguage:function setSelectedLanguage(){return undefined;},translatedLanguage:EN,setTranslatedLanguage:function setTranslatedLanguage(){return undefined;}});var fileId=8;var projectId=parseInt(process.env.REACT_APP_CROWDIN_PROJECTID);var stringTranslationsApi=new StringTranslations({token:process.env.REACT_APP_CROWDIN_APIKEY});var fetchTranslationsForSelectedLanguage=function fetchTranslationsForSelectedLanguage(selectedLanguage){return stringTranslationsApi.listLanguageTranslations(projectId,selectedLanguage.code,undefined,fileId,200);};var LanguageContextProvider=function LanguageContextProvider(_ref){var children=_ref.children;var _useState=useState(EN),_useState2=_slicedToArray(_useState,2),selectedLanguage=_useState2[0],setSelectedLanguage=_useState2[1];var _useState3=useState(EN),_useState4=_slicedToArray(_useState3,2),translatedLanguage=_useState4[0],setTranslatedLanguage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),translations=_useState6[0],setTranslations=_useState6[1];var getStoredLang=function getStoredLang(storedLangCode){return allLanguages.filter(function(language){return language.code===storedLangCode;})[0];};useEffect(function(){var storedLangCode=localStorage.getItem(CACHE_KEY);if(storedLangCode){var storedLang=getStoredLang(storedLangCode);setSelectedLanguage(storedLang);}else{setSelectedLanguage(EN);}},[]);useEffect(function(){if(selectedLanguage){console.log(\"import(`../../../public/i18n/\".concat(selectedLanguage.code,\".json`)\"));fetch(\"./i18n/\".concat(selectedLanguage.code,\".json\")).then(function(r){return r.json();})// fetchTranslationsForSelectedLanguage(selectedLanguage)\n.then(function(translationApiResponse){if(translationApiResponse.data.length<1){setTranslations(['error']);}else{setTranslations(translationApiResponse.data);}}).then(function(){return setTranslatedLanguage(selectedLanguage);}).catch(function(e){console.error(\"ERROR\");console.error(e);setTranslations(['error']);});}},[selectedLanguage,setTranslations]);var handleLanguageSelect=function handleLanguageSelect(langObject){setSelectedLanguage(langObject);localStorage.setItem(CACHE_KEY,langObject.code);};return/*#__PURE__*/_jsx(LanguageContext.Provider,{value:{selectedLanguage:selectedLanguage,setSelectedLanguage:handleLanguageSelect,translatedLanguage:translatedLanguage,setTranslatedLanguage:setTranslatedLanguage},children:/*#__PURE__*/_jsx(TranslationsContext.Provider,{value:{translations:translations,setTranslations:setTranslations},children:children})});};export{LanguageContext,LanguageContextProvider};","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/SALSA/Salsa_frontend/src/contexts/Localisation/languageContext.tsx"],"names":["React","useState","useEffect","StringTranslations","TranslationsContext","allLanguages","EN","CACHE_KEY","LanguageContext","createContext","selectedLanguage","setSelectedLanguage","undefined","translatedLanguage","setTranslatedLanguage","fileId","projectId","parseInt","process","env","REACT_APP_CROWDIN_PROJECTID","stringTranslationsApi","token","REACT_APP_CROWDIN_APIKEY","fetchTranslationsForSelectedLanguage","listLanguageTranslations","code","LanguageContextProvider","children","translations","setTranslations","getStoredLang","storedLangCode","filter","language","localStorage","getItem","storedLang","console","log","fetch","then","r","json","translationApiResponse","data","length","catch","e","error","handleLanguageSelect","langObject","setItem"],"mappings":"gNAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,kBAAT,KAAmC,6BAAnC,CACA,OAASC,mBAAT,KAAoC,2CAApC,CACA,OAASC,YAAT,CAAuBC,EAAvB,KAAiC,mCAAjC,CAEA,GAAMC,CAAAA,SAAS,CAAG,qBAAlB,CAcA,GAAMC,CAAAA,eAAe,cAAGR,KAAK,CAACS,aAAN,CAAoB,CAC1CC,gBAAgB,CAAEJ,EADwB,CAE1CK,mBAAmB,CAAE,qCAAMC,CAAAA,SAAN,EAFqB,CAG1CC,kBAAkB,CAAEP,EAHsB,CAI1CQ,qBAAqB,CAAE,uCAAMF,CAAAA,SAAN,EAJmB,CAApB,CAAxB,CAOA,GAAMG,CAAAA,MAAM,CAAG,CAAf,CACA,GAAMC,CAAAA,SAAS,CAAGC,QAAQ,CAACC,OAAO,CAACC,GAAR,CAAYC,2BAAb,CAA1B,CACA,GAAMC,CAAAA,qBAAqB,CAAG,GAAIlB,CAAAA,kBAAJ,CAAuB,CACnDmB,KAAK,CAAEJ,OAAO,CAACC,GAAR,CAAYI,wBADgC,CAAvB,CAA9B,CAIA,GAAMC,CAAAA,oCAAoC,CAAG,QAAvCA,CAAAA,oCAAuC,CAACd,gBAAD,CAAsB,CACjE,MAAOW,CAAAA,qBAAqB,CAACI,wBAAtB,CAA+CT,SAA/C,CAA0DN,gBAAgB,CAACgB,IAA3E,CAAiFd,SAAjF,CAA4FG,MAA5F,CAAoG,GAApG,CAAP,CACD,CAFD,CAIA,GAAMY,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,eACA3B,QAAQ,CAAMK,EAAN,CADR,wCACzCI,gBADyC,eACvBC,mBADuB,8BAEIV,QAAQ,CAAMK,EAAN,CAFZ,yCAEzCO,kBAFyC,eAErBC,qBAFqB,8BAGRb,QAAQ,CAAa,EAAb,CAHA,yCAGzC4B,YAHyC,eAG3BC,eAH2B,eAKhD,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,cAAD,CAA4B,CAChD,MAAO3B,CAAAA,YAAY,CAAC4B,MAAb,CAAoB,SAACC,QAAD,CAAc,CACvC,MAAOA,CAAAA,QAAQ,CAACR,IAAT,GAAkBM,cAAzB,CACD,CAFM,EAEJ,CAFI,CAAP,CAGD,CAJD,CAMA9B,SAAS,CAAC,UAAM,CACd,GAAM8B,CAAAA,cAAc,CAAGG,YAAY,CAACC,OAAb,CAAqB7B,SAArB,CAAvB,CACA,GAAIyB,cAAJ,CAAoB,CAClB,GAAMK,CAAAA,UAAU,CAAGN,aAAa,CAACC,cAAD,CAAhC,CACArB,mBAAmB,CAAC0B,UAAD,CAAnB,CACD,CAHD,IAGO,CACL1B,mBAAmB,CAACL,EAAD,CAAnB,CACD,CACF,CARQ,CAQN,EARM,CAAT,CAUAJ,SAAS,CAAC,UAAM,CACd,GAAIQ,gBAAJ,CAAsB,CACpB4B,OAAO,CAACC,GAAR,wCAA6C7B,gBAAgB,CAACgB,IAA9D,aACAc,KAAK,kBAAW9B,gBAAgB,CAACgB,IAA5B,UAAL,CACGe,IADH,CACQ,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAACC,IAAF,EAAF,EADT,CAEA;AAFA,CAGGF,IAHH,CAGQ,SAACG,sBAAD,CAA4B,CAChC,GAAIA,sBAAsB,CAACC,IAAvB,CAA4BC,MAA5B,CAAqC,CAAzC,CAA4C,CAC1ChB,eAAe,CAAC,CAAC,OAAD,CAAD,CAAf,CACD,CAFD,IAEO,CACLA,eAAe,CAACc,sBAAsB,CAACC,IAAxB,CAAf,CACD,CACF,CATH,EAUGJ,IAVH,CAUQ,iBAAM3B,CAAAA,qBAAqB,CAACJ,gBAAD,CAA3B,EAVR,EAWGqC,KAXH,CAWS,SAACC,CAAD,CAAO,CACZV,OAAO,CAACW,KAAR,CAAc,OAAd,EACAX,OAAO,CAACW,KAAR,CAAcD,CAAd,EACAlB,eAAe,CAAC,CAAC,OAAD,CAAD,CAAf,CACD,CAfH,EAgBD,CACF,CApBQ,CAoBN,CAACpB,gBAAD,CAAmBoB,eAAnB,CApBM,CAAT,CAsBA,GAAMoB,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,UAAD,CAA0B,CACrDxC,mBAAmB,CAACwC,UAAD,CAAnB,CACAhB,YAAY,CAACiB,OAAb,CAAqB7C,SAArB,CAAgC4C,UAAU,CAACzB,IAA3C,EACD,CAHD,CAKA,mBACE,KAAC,eAAD,CAAiB,QAAjB,EACE,KAAK,CAAE,CAAEhB,gBAAgB,CAAhBA,gBAAF,CAAoBC,mBAAmB,CAAEuC,oBAAzC,CAA+DrC,kBAAkB,CAAlBA,kBAA/D,CAAmFC,qBAAqB,CAArBA,qBAAnF,CADT,uBAGE,KAAC,mBAAD,CAAqB,QAArB,EAA8B,KAAK,CAAE,CAAEe,YAAY,CAAZA,YAAF,CAAgBC,eAAe,CAAfA,eAAhB,CAArC,UAAyEF,QAAzE,EAHF,EADF,CAOD,CAvDD,CAyDA,OAASpB,eAAT,CAA0BmB,uBAA1B","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { StringTranslations } from '@crowdin/crowdin-api-client'\r\nimport { TranslationsContext } from 'contexts/Localisation/translationsContext'\r\nimport { allLanguages, EN } from 'config/localisation/languageCodes'\r\n\r\nconst CACHE_KEY = 'pancakeSwapLanguage'\r\n\r\nexport interface LangType {\r\n  code: string\r\n  language: string\r\n}\r\n\r\nexport interface LanguageState {\r\n  selectedLanguage: LangType\r\n  setSelectedLanguage: (langObject: LangType) => void\r\n  translatedLanguage: LangType\r\n  setTranslatedLanguage: React.Dispatch<React.SetStateAction<LangType>>\r\n}\r\n\r\nconst LanguageContext = React.createContext({\r\n  selectedLanguage: EN,\r\n  setSelectedLanguage: () => undefined,\r\n  translatedLanguage: EN,\r\n  setTranslatedLanguage: () => undefined,\r\n} as LanguageState)\r\n\r\nconst fileId = 8\r\nconst projectId = parseInt(process.env.REACT_APP_CROWDIN_PROJECTID)\r\nconst stringTranslationsApi = new StringTranslations({\r\n  token: process.env.REACT_APP_CROWDIN_APIKEY,\r\n})\r\n\r\nconst fetchTranslationsForSelectedLanguage = (selectedLanguage) => {\r\n  return stringTranslationsApi.listLanguageTranslations(projectId, selectedLanguage.code, undefined, fileId, 200)\r\n}\r\n\r\nconst LanguageContextProvider = ({ children }) => {\r\n  const [selectedLanguage, setSelectedLanguage] = useState<any>(EN)\r\n  const [translatedLanguage, setTranslatedLanguage] = useState<any>(EN)\r\n  const [translations, setTranslations] = useState<Array<any>>([])\r\n\r\n  const getStoredLang = (storedLangCode: string) => {\r\n    return allLanguages.filter((language) => {\r\n      return language.code === storedLangCode\r\n    })[0]\r\n  }\r\n\r\n  useEffect(() => {\r\n    const storedLangCode = localStorage.getItem(CACHE_KEY)\r\n    if (storedLangCode) {\r\n      const storedLang = getStoredLang(storedLangCode)\r\n      setSelectedLanguage(storedLang)\r\n    } else {\r\n      setSelectedLanguage(EN)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (selectedLanguage) {\r\n      console.log(`import(\\`../../../public/i18n/${selectedLanguage.code}.json\\`)`);\r\n      fetch(`./i18n/${selectedLanguage.code}.json`)\r\n        .then(r=>r.json())\r\n      // fetchTranslationsForSelectedLanguage(selectedLanguage)\r\n        .then((translationApiResponse) => {\r\n          if (translationApiResponse.data.length < 1) {\r\n            setTranslations(['error'])\r\n          } else {\r\n            setTranslations(translationApiResponse.data)\r\n          }\r\n        })\r\n        .then(() => setTranslatedLanguage(selectedLanguage))\r\n        .catch((e) => {\r\n          console.error(\"ERROR\");\r\n          console.error(e);\r\n          setTranslations(['error'])\r\n        })\r\n    }\r\n  }, [selectedLanguage, setTranslations])\r\n\r\n  const handleLanguageSelect = (langObject: LangType) => {\r\n    setSelectedLanguage(langObject)\r\n    localStorage.setItem(CACHE_KEY, langObject.code)\r\n  }\r\n\r\n  return (\r\n    <LanguageContext.Provider\r\n      value={{ selectedLanguage, setSelectedLanguage: handleLanguageSelect, translatedLanguage, setTranslatedLanguage }}\r\n    >\r\n      <TranslationsContext.Provider value={{ translations, setTranslations }}>{children}</TranslationsContext.Provider>\r\n    </LanguageContext.Provider>\r\n  )\r\n}\r\n\r\nexport { LanguageContext, LanguageContextProvider }\r\n"]},"metadata":{},"sourceType":"module"}